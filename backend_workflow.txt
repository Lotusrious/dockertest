# Travel Agent ë°±ì—”ë“œ êµ¬í˜„ ì›Œí¬í”Œë¡œìš°
-------------------------------------------------------------------------------

## ğŸ“‹ í”„ë¡œì„¸ìŠ¤/ë„êµ¬ ìš´ì˜(Jira Â· Swagger Â· GitHub)

### Jira (ì• ìì¼)
- ì›Œí¬í”Œë¡œìš°: Backlog â†’ Selected for Dev â†’ In Progress â†’ In Review â†’ QA/Verification â†’ Done
- ìŠ¤í”„ë¦°íŠ¸: 1ì£¼ ë‹¨ìœ„, ê¸ˆìš”ì¼ ë°ëª¨/íšŒê³ 
- WIP ì œí•œ: In Progress(ê°œì¸â‰¤2), In Review(íŒ€â‰¤5)
- ë¸Œëœì¹˜/ì»¤ë°‹: feature/JIRA-123-short, fix/JIRA-234; ì»¤ë°‹ ë©”ì‹œì§€ `JIRA-123: ìš”ì•½`
- Smart Commit: `JIRA-123 #comment ë‚´ìš© #time 1h #transition In Review`

### Swagger/OpenAPI
- ì†ŒìŠ¤ ì˜¤ë¸Œ íŠ¸ë£¨ìŠ¤: `docs/api/openapi.yml`
- ë³€ê²½ ì‹œ: PRì— ìŠ¤í‚¤ë§ˆ/ìƒ˜í”Œ ìš”ì²­Â·ì‘ë‹µÂ·ì—ëŸ¬ í¬í•¨ â†’ ë¨¸ì§€ í›„ Swagger UI ê²€ì¦
- ì—ëŸ¬ ì‘ë‹µ: `ErrorResponse{code,message,details}` ì¼ê´€ ì‚¬ìš©
- í˜ì´ì§€ë„¤ì´ì…˜: `size` ìƒí•œÂ·`cursor`(keyset) ëª…ì‹œ

### GitHub (Issue/PR)
- Issue í…œí”Œë¦¿: ë²„ê·¸/ê¸°ëŠ¥ ìš”ì²­ ì‚¬ìš©, ìˆ˜ìš© ê¸°ì¤€ ëª…ì‹œ
- PR í…œí”Œë¦¿: ë¹Œë“œ/í…ŒìŠ¤íŠ¸ í†µê³¼, OpenAPI ê°±ì‹ , ì˜ˆì™¸ ê·œê²© ì²´í¬, ë¡¤ë°± ê³„íš
- CODEOWNERS: ëª¨ë“ˆë³„ ë¦¬ë·°ì–´ ìë™ ì§€ì •, ë¦¬ë·° 1ì¸ ì´ìƒ í•„ìˆ˜, ë³€ê²½ ë¼ì¸ 400â†“

### ë„ë©”ì¸ ë° ì—­í•  ì†Œìœ ê¶Œ
**ë„ë©”ì¸ ë¶„ë°°:**
- TL: AI Chat Domain (8 APIs) + í”„ë¡œì íŠ¸ ì´ê´„
- BE-1: User Management (7 APIs) + Sharing Domain (2 APIs) + ì¸í”„ë¼/ë°°í¬ ìš´ì˜
- BE-2: Trip Planning Domain (8 APIs) + í”„ë¡ íŠ¸ì—”ë“œ ì´ê´„
- BE-3: Review System (8 APIs) + Media Management Domain (2 APIs) + ë¬¸ì„œê´€ë¦¬
- BE-4: Recommendation (6 APIs) + Payment & Billing Domain (4 APIs) + QA/í…ŒìŠ¤íŒ…

**ë¶€ì°¨ì  ì—­í• :**
- BE-1: ì¸í”„ë¼/ë°°í¬ ìš´ì˜(AWS ECR/ECS, CI/CD íŒŒì´í”„ë¼ì¸, ë³´ì•ˆ/ì‹œí¬ë¦¿ ê´€ë¦¬, ë¹„ìš© ëª¨ë‹ˆí„°ë§)
- BE-2: í”„ë¡ íŠ¸ì—”ë“œ ì´ê´„(React í”„ë¡œì íŠ¸, ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬, ì•„í‚¤í…ì²˜, UI/UX ê°€ì´ë“œ)
- BE-3: ë¬¸ì„œê´€ë¦¬(Notion ìœ„í‚¤, Swagger ë¬¸ì„œ, Jira ìŠ¤í”„ë¦°íŠ¸)
- BE-4: QA/í…ŒìŠ¤íŒ…(í…ŒìŠ¤íŠ¸ ì „ëµ, E2E í…ŒìŠ¤íŠ¸, í’ˆì§ˆ ê²Œì´íŠ¸)

-------------------------------------------------------------------------------
## ğŸ“‹ Phase 1: ìœ ìŠ¤ì¼€ì´ìŠ¤ ì •ì˜ ë° ë„ë©”ì¸ ë¶„ì„

### 1.1 í•µì‹¬ ì•¡í„° ì •ì˜
**ì¼ë°˜ ì‚¬ìš©ì (ì—¬í–‰ì)**
- UC-01: íšŒì›ê°€ì… ë° í”„ë¡œí•„ ì„¤ì • (ì—¬í–‰ ìŠ¤íƒ€ì¼, ì„ í˜¸ë„, í”„ë¡œí•„ ì‚¬ì§„)
- UC-02: ì—¬í–‰ ê³„íš ìƒì„± (ê¸°ê°„, ëª©ì ì§€, ì œì•½ì‚¬í•­ ì…ë ¥)
- UC-03: ì‚¬ì§„ ì—…ë¡œë“œ ë° ë¶„ì„ (ìœ„ì¹˜ ì¶”ì •, í¬í† ìŠ¤íŒŸ ì¶”ì²œ)
- UC-04: AI ì±„íŒ… ëŒ€í™” (ì—¬í–‰ ì§ˆë¬¸, ì¶”ì²œ ë°›ê¸°, ì„ í˜¸ë„ í•™ìŠµ)
- UC-04-1: ëŒ€í™” ë‚´ìš© ì‹¤ì‹œê°„ ë¶„ì„ (ì„ í˜¸ë„/ê´€ì‹¬ì‚¬/ì˜ˆì‚°íŒ¨í„´ ì¶”ì¶œ)
- UC-04-2: ì‚¬ìš©ì ì„ í˜¸ë„ í”„ë¡œí•„ ìë™ ì—…ë°ì´íŠ¸ (í•™ìŠµ ë°ì´í„° ìƒì„±)
- UC-05: ì¼ì • ê´€ë¦¬ (ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ)
- UC-06: í¬ë ˆë”§ êµ¬ë§¤ ë° ì‚¬ìš© ë‚´ì—­ í™•ì¸
- UC-07: ì¼ì • ê³µìœ  (ë§í¬/QR ìƒì„±)
- UC-08: ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬ (ì§€ì—­ ì±„íŒ…)
- UC-16: ì—¬í–‰ í›„ê¸° ì‘ì„± (í‰ì , ë¦¬ë·° í…ìŠ¤íŠ¸, ì‚¬ì§„, ì¥ì†Œë³„ í‰ê°€)
- UC-17: í›„ê¸° ì¡°íšŒ ë° ê´€ë¦¬ (ë‚´ í›„ê¸°, ë‹¤ë¥¸ ì‚¬ìš©ì í›„ê¸° ì¡°íšŒ)
- UC-18: ê°œì¸í™” ì—¬í–‰ ì¶”ì²œ (ê³¼ê±° ì´ë ¥ ê¸°ë°˜ ë§ì¶¤ ì¶”ì²œ)
- UC-19: ì¶”ì²œ í”¼ë“œë°± (ì¶”ì²œ ê²°ê³¼ í‰ê°€, í•™ìŠµ ë°ì´í„° ì œê³µ)

**ì‹œìŠ¤í…œ ì•¡í„°**
- UC-09: ì¼ì • ê°ì‹œ (ë‚ ì”¨/ë³€ê²½ì‚¬í•­ ëª¨ë‹ˆí„°ë§)
- UC-10: ìë™ ì•Œë¦¼ ë°œì†¡ (ì´ë©”ì¼/ì›¹í‘¸ì‹œ)
- UC-11: ìºì‹œ ê´€ë¦¬ (ì‘ë‹µ ì¬í™œìš©)
- UC-12: ì™¸ë¶€ API í˜¸ì¶œ ê´€ë¦¬
- UC-20: ì¶”ì²œ ëª¨ë¸ í•™ìŠµ (í›„ê¸° ë°ì´í„° + ì±„íŒ… ì„ í˜¸ë„ ê¸°ë°˜ ML ëª¨ë¸ í›ˆë ¨)
- UC-21: ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ ë¶„ì„ (í´ë¦­, ê²€ìƒ‰, ì˜ˆì•½ íŒ¨í„´ ìˆ˜ì§‘)
- UC-24: ëŒ€í™” ì„ í˜¸ë„ ë°ì´í„° ìˆ˜ì§‘ (ì±„íŒ… ë¶„ì„ ê²°ê³¼ ìë™ ìˆ˜ì§‘)
- UC-25: ì‹¤ì‹œê°„ ì„ í˜¸ë„ í”„ë¡œí•„ ì—…ë°ì´íŠ¸ (ëŒ€í™” ë¶„ì„ â†’ í•™ìŠµ ë°ì´í„° ìƒì„±)

**ê´€ë¦¬ì**
- UC-13: ì‚¬ìš©ì ê´€ë¦¬ (ì¡°íšŒ, ì •ì§€, í¬ë ˆë”§ ì¡°ì •)
- UC-14: ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ (API ì‚¬ìš©ëŸ‰, ë¹„ìš©)
- UC-15: ê°ì‚¬ ë¡œê·¸ ì¡°íšŒ
- UC-22: í›„ê¸° ëª¨ë”ë ˆì´ì…˜ (ë¶€ì ì ˆí•œ í›„ê¸° ê´€ë¦¬)
- UC-23: ì¶”ì²œ ì‹œìŠ¤í…œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (ì¶”ì²œ ì •í™•ë„, A/B í…ŒìŠ¤íŠ¸)

### 1.2 ë„ë©”ì¸ ëª¨ë¸
```
User â”€â”€â”€â”€ UserProfile
  â”‚         â”œâ”€â”€ photos[]
  â”‚         â””â”€â”€ UserPreference â”€â”€â”€â”€ PreferenceTag
  â”œâ”€â”€ ChatThread â”€â”€â”€â”€ AgentMessage
  â”œâ”€â”€ Trip â”€â”€â”€â”€ Schedule â”€â”€â”€â”€ Place
  â”‚     â”‚        â””â”€â”€ TrendReview
  â”‚     â””â”€â”€ TripReview â”€â”€â”€â”€ ReviewRating
  â”‚                   â”œâ”€â”€ ReviewPhoto
  â”‚                   â””â”€â”€ PlaceRating
  â”œâ”€â”€ PhotoAnalysis
  â”œâ”€â”€ CreditLedger
  â”œâ”€â”€ NotificationChannel
  â”œâ”€â”€ RecommendationHistory â”€â”€â”€â”€ RecommendationFeedback
  â””â”€â”€ UserBehaviorLog â”€â”€â”€â”€ ClickEvent
                        â”œâ”€â”€ SearchEvent
                        â””â”€â”€ BookingEvent
```

-------------------------------------------------------------------------------
## ğŸ—ï¸ Phase 2: ë°±ì—”ë“œ ì•„í‚¤í…ì²˜ ì„¤ê³„

### 2.1 ê¸°ìˆ  ìŠ¤íƒ
- **ë°±ì—”ë“œ**: Spring Boot 3.x + Java 17
- **í”„ë¡ íŠ¸ì—”ë“œ**: React 18 + TypeScript
- **ë°ì´í„°ë² ì´ìŠ¤**: AWS RDS PostgreSQL 14+ (PostGIS í™•ì¥)
- **ìºì‹±**: AWS ElastiCache (Redis)
- **í**: AWS SQS ë˜ëŠ” Amazon MQ (RabbitMQ)
- **íŒŒì¼ ì €ì¥**: AWS S3
- **ì»´í“¨íŒ…**: AWS EC2 (Auto Scaling Group)
- **ë¡œë“œë°¸ëŸ°ì„œ**: AWS Application Load Balancer (ALB)
- **WebSocket**: Spring WebSocket + STOMP
- **API ë¬¸ì„œ**: SpringDoc OpenAPI 3.0 (Swagger)
- **ë¹Œë“œ ë„êµ¬**: Gradle (ë°±ì—”ë“œ), Vite (í”„ë¡ íŠ¸ì—”ë“œ)
- **ORM**: Spring Data JPA + Hibernate
- **ì»¨í…Œì´ë„ˆí™”**: Docker + Docker Compose (ê°œë°œìš©)
- **ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬**: AWS ECR
- **CI/CD**: GitHub Actions (ë¬´ë£Œ 2,000ë¶„/ì›”)
- **ì½”ë“œ í’ˆì§ˆ**: SonarQube, CheckStyle, SpotBugs
- **ë³´ì•ˆ ìŠ¤ìº”**: Snyk, OWASP Dependency Check
- **ì¶”ì²œ ì‹œìŠ¤í…œ**: Apache Mahout ë˜ëŠ” Smile (Java ML ë¼ì´ë¸ŒëŸ¬ë¦¬)
- **ë°ì´í„° ë¶„ì„**: Apache Commons Math, Weka (ê²½ëŸ‰ ML)
- **ì‹¤ì‹œê°„ ì²˜ë¦¬**: Spring WebFlux (ë¦¬ì•¡í‹°ë¸Œ)

### 2.2 ì•„í‚¤í…ì²˜ íŒ¨í„´
```
â”œâ”€â”€ Presentation Layer (Controllers)
â”œâ”€â”€ Application Layer (Services)
â”œâ”€â”€ Domain Layer (Entities, Value Objects)
â”œâ”€â”€ Infrastructure Layer (Repositories, External APIs)
â””â”€â”€ Cross-Cutting Concerns (Auth, Logging, Caching)
```

### 2.3 AWS ì•„í‚¤í…ì²˜
```
Internet Gateway
    â†“
Application Load Balancer (ALB)
    â†“
EC2 Auto Scaling Group (Multi-AZ)
â”œâ”€â”€ EC2 Instance 1 (Spring Boot App)
â”œâ”€â”€ EC2 Instance 2 (Spring Boot App)
â””â”€â”€ EC2 Instance N...
    â†“
AWS RDS PostgreSQL (Multi-AZ)
â”œâ”€â”€ Primary Instance
â””â”€â”€ Standby Instance (ìë™ í˜ì¼ì˜¤ë²„)
    
ElastiCache Redis Cluster
â”œâ”€â”€ Primary Node
â””â”€â”€ Replica Nodes

S3 Bucket (ì‚¬ì§„/ë¬¸ì„œ ì €ì¥)
â””â”€â”€ CloudFront CDN (ì„ íƒì‚¬í•­)

AWS SQS (ë¹„ë™ê¸° ì‘ì—… í)
â”œâ”€â”€ ì‚¬ì§„ ë¶„ì„ í
â”œâ”€â”€ ì•Œë¦¼ ì „ì†¡ í
â””â”€â”€ ì¼ì • ê°ì‹œ í
```

### 2.4 Docker êµ¬ì„± (ê°œë°œ í™˜ê²½)
```yaml
# docker-compose.yml
services:
  backend:
    build: ./backend
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      - postgres
      - redis
  
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
      
  postgres:
    image: postgis/postgis:14-3.2
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
      
  rabbitmq:
    image: rabbitmq:3-management
    ports:
      - "5672:5672"
      - "15672:15672"
```

### 2.4 í•µì‹¬ íŒ¨í‚¤ì§€ êµ¬ì¡°
```
src/main/java/com/travelagent/
â”œâ”€â”€ config/           # Spring ì„¤ì • (Security, WebSocket, Redis ë“±)
â”œâ”€â”€ auth/            # JWT, OAuth2, Spring Security
â”œâ”€â”€ user/            # ì‚¬ìš©ì ë„ë©”ì¸
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ repository/
â”‚   â””â”€â”€ entity/
â”œâ”€â”€ auth/            # JWT, OAuth2, Spring Security (BE-1)
â”œâ”€â”€ user/            # ì‚¬ìš©ì ë„ë©”ì¸ (BE-1)
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ repository/
â”‚   â””â”€â”€ entity/
â”œâ”€â”€ sharing/         # ê³µìœ  ë„ë©”ì¸ (BE-1)
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â””â”€â”€ entity/
â”œâ”€â”€ chat/            # AI ì±„íŒ… ë„ë©”ì¸ (TL)
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ engine/      # AI í´ë¼ì´ì–¸íŠ¸, Mock ì‘ë‹µ
â”‚   â”œâ”€â”€ analyzer/    # ëŒ€í™” ë¶„ì„, ì„ í˜¸ë„ ì¶”ì¶œ, NLP íŒŒì‹±
â”‚   â””â”€â”€ dto/
â”œâ”€â”€ trip/            # ì—¬í–‰ ê³„íš ë„ë©”ì¸ (BE-2)
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ repository/
â”‚   â””â”€â”€ entity/
â”œâ”€â”€ review/          # í›„ê¸° ë„ë©”ì¸ (BE-3)
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ repository/
â”‚   â””â”€â”€ entity/
â”œâ”€â”€ media/           # ë¯¸ë””ì–´ ë„ë©”ì¸ (BE-3)
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â””â”€â”€ entity/
â”œâ”€â”€ recommendation/  # ì¶”ì²œ ë„ë©”ì¸ (BE-4)
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ repository/
â”‚   â”œâ”€â”€ algorithm/   # ML ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
â”‚   â””â”€â”€ entity/
â”œâ”€â”€ billing/         # ê²°ì œ/í¬ë ˆë”§ ë„ë©”ì¸ (BE-4)
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ repository/
â”‚   â””â”€â”€ entity/
â”œâ”€â”€ admin/           # ê´€ë¦¬ì ê¸°ëŠ¥
â”œâ”€â”€ common/          # ê³µí†µ ìœ í‹¸ë¦¬í‹°, ì˜ˆì™¸ ì²˜ë¦¬
â””â”€â”€ external/        # ì™¸ë¶€ API í´ë¼ì´ì–¸íŠ¸ (Gemini, Maps ë“±)
```

-------------------------------------------------------------------------------
## ğŸ”Œ Phase 3: API ì„¤ê³„

### 3.1 RESTful ì—”ë“œí¬ì¸íŠ¸
```yaml
# BE-1: User Management Domain (7 APIs)
POST   /auth/register
POST   /auth/login
POST   /auth/refresh
POST   /auth/logout
GET    /users/profile
PUT    /users/profile
POST   /users/profile/photos

# BE-1: Sharing Domain (2 APIs)
POST   /share/tokens
GET    /share/{token}

# TL: AI Chat Domain (8 APIs)
GET    /chat/threads
POST   /chat/threads
GET    /chat/threads/{id}/messages
POST   /chat/threads/{id}/messages
POST   /chat/threads/{id}/analyze-photo
POST   /chat/analyze-preferences/{threadId}  # ëŒ€í™” ë‚´ìš© ì„ í˜¸ë„ ë¶„ì„
GET    /chat/preferences/learning-data       # ì¶”ì²œ ëª¨ë¸ìš© í•™ìŠµ ë°ì´í„°
POST   /chat/generate-trip-from-chat         # AI ì±„íŒ… â†’ ì—¬í–‰ ê³„íš

# BE-2: Trip Planning Domain (8 APIs)
GET    /trips
POST   /trips
GET    /trips/{id}
PUT    /trips/{id}
DELETE /trips/{id}
POST   /trips/{id}/schedules
PUT    /trips/{id}/schedules/{scheduleId}
POST   /trips/{id}/complete                  # ì—¬í–‰ ì™„ë£Œ ì²˜ë¦¬

# BE-3: Review System Domain (8 APIs)
GET    /reviews
POST   /reviews
GET    /reviews/{id}
PUT    /reviews/{id}
DELETE /reviews/{id}
GET    /reviews/trip/{tripId}
GET    /reviews/user/{userId}
POST   /reviews/{id}/moderate

# BE-3: Media Management Domain (2 APIs)
POST   /photos/analyze
GET    /photos/analysis/{id}

# BE-4: Recommendation Domain (6 APIs)
GET    /recommendations/destinations
GET    /recommendations/activities/{userId}
POST   /recommendations/feedback
GET    /recommendations/history/{userId}
GET    /recommendations/similar-users/{userId}
POST   /recommendations/train-model

# BE-4: Payment & Billing Domain (4 APIs)
GET    /billing/credits
POST   /billing/orders
POST   /billing/webhooks/kakaopay
GET    /billing/history

# WebSocket
WS     /ws (namespace: /chat, /notifications)
```

-------------------------------------------------------------------------------
## ğŸ’¾ Phase 4: ë°ì´í„°ë² ì´ìŠ¤ ìƒì„¸ ì„¤ê³„

### 4.1 í•µì‹¬ í…Œì´ë¸” DDL
```sql
-- ì‚¬ìš©ì
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  role VARCHAR(50) DEFAULT user,
  credits INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì—¬í–‰ ê³„íš
CREATE TABLE trips (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  thread_id UUID,
  title VARCHAR(255) NOT NULL,
  start_date DATE NOT NULL,
  end_date DATE NOT NULL,
  destination VARCHAR(255),
  ai_summary TEXT,
  ai_tags JSONB,
  watch_enabled BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW(),
  INDEX idx_trips_user_dates (user_id, start_date, end_date)
);

-- ì¼ì •
CREATE TABLE schedules (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  trip_id UUID REFERENCES trips(id) ON DELETE CASCADE,
  day INTEGER NOT NULL,
  start_time TIME NOT NULL,
  end_time TIME NOT NULL,
  place_id UUID REFERENCES places(id),
  activity TEXT,
  tags JSONB,
  weather_risk VARCHAR(50),
  INDEX idx_schedules_trip_day (trip_id, day, start_time)
);

-- ì¥ì†Œ (PostGIS í™œìš©)
CREATE TABLE places (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  location GEOGRAPHY(POINT, 4326),
  category VARCHAR(100),
  meta_json JSONB,
  created_at TIMESTAMP DEFAULT NOW(),
  INDEX idx_places_location USING GIST(location),
  INDEX idx_places_category (category)
);

-- ì—¬í–‰ í›„ê¸°
CREATE TABLE trip_reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  trip_id UUID REFERENCES trips(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id),
  rating INTEGER NOT NULL CHECK (rating BETWEEN 1 AND 5),
  title VARCHAR(255) NOT NULL,
  content TEXT,
  photos JSONB, -- í›„ê¸° ì‚¬ì§„ URL ë°°ì—´
  tags JSONB, -- íƒœê·¸ ë°°ì—´
  place_ratings JSONB, -- ì¥ì†Œë³„ í‰ì  {place_id: rating}
  is_public BOOLEAN DEFAULT true,
  moderation_status VARCHAR(50) DEFAULT 'pending', -- pending, approved, rejected
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  INDEX idx_trip_reviews_trip_id (trip_id),
  INDEX idx_trip_reviews_user_id (user_id, created_at DESC),
  INDEX idx_trip_reviews_rating (rating, created_at DESC),
  INDEX idx_trip_reviews_public (is_public, moderation_status, created_at DESC)
);

-- ì‚¬ìš©ì ì„ í˜¸ë„ í”„ë¡œí•„
CREATE TABLE user_preferences (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) UNIQUE,
  travel_style JSONB, -- {"adventure": 0.8, "culture": 0.6, "food": 0.9}
  preferred_activities JSONB, -- ì„ í˜¸ í™œë™ íƒœê·¸ì™€ ê°€ì¤‘ì¹˜
  budget_preference VARCHAR(50), -- budget, mid-range, luxury
  group_size_preference INTEGER, -- ì„ í˜¸ ê·¸ë£¹ í¬ê¸°
  travel_pace VARCHAR(50), -- slow, moderate, fast
  updated_at TIMESTAMP DEFAULT NOW(),
  INDEX idx_user_preferences_user_id (user_id)
);

-- ì¶”ì²œ ì´ë ¥
CREATE TABLE recommendation_history (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  recommendation_type VARCHAR(50) NOT NULL, -- destination, activity, place
  recommended_item_id UUID, -- place_id ë˜ëŠ” ë‹¤ë¥¸ ì°¸ì¡°
  recommended_data JSONB, -- ì¶”ì²œëœ ë°ì´í„° ìŠ¤ëƒ…ìƒ·
  relevance_score DECIMAL(3,2), -- 0.00-1.00
  created_at TIMESTAMP DEFAULT NOW(),
  INDEX idx_recommendation_history_user_id (user_id, created_at DESC),
  INDEX idx_recommendation_history_type (recommendation_type, created_at DESC)
);

-- ì¶”ì²œ í”¼ë“œë°±
CREATE TABLE recommendation_feedback (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  recommendation_id UUID REFERENCES recommendation_history(id),
  user_id UUID REFERENCES users(id),
  feedback_type VARCHAR(50) NOT NULL, -- liked, disliked, clicked, booked
  feedback_value DECIMAL(3,2), -- í”¼ë“œë°± ê°•ë„ (0.00-1.00)
  created_at TIMESTAMP DEFAULT NOW(),
  INDEX idx_recommendation_feedback_recommendation_id (recommendation_id),
  INDEX idx_recommendation_feedback_user_id (user_id, created_at DESC),
  INDEX idx_recommendation_feedback_type (feedback_type, created_at DESC)
);

-- ì‚¬ìš©ì í–‰ë™ ë¡œê·¸
CREATE TABLE user_behavior_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  event_type VARCHAR(50) NOT NULL, -- click, search, view, book
  entity_type VARCHAR(50), -- trip, place, review, recommendation
  entity_id UUID,
  event_data JSONB, -- ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ ë°ì´í„°
  session_id VARCHAR(255),
  created_at TIMESTAMP DEFAULT NOW(),
  INDEX idx_user_behavior_logs_user_id (user_id, created_at DESC),
  INDEX idx_user_behavior_logs_event_type (event_type, created_at DESC),
  INDEX idx_user_behavior_logs_entity (entity_type, entity_id)
);
```

-------------------------------------------------------------------------------
## ğŸ“… Phase 5: ì£¼ì°¨ë³„ êµ¬í˜„ ê³„íš

### ì£¼ì°¨ 1: ê¸°ì´ˆ ì¸í”„ë¼ êµ¬ì¶• + CI/CD ê¸°ë°˜ êµ¬ì¶•
**ì›”ìš”ì¼-í™”ìš”ì¼**
- [ ] Spring Boot í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (Spring Initializr)
- [ ] GitHub Repository ìƒì„± ë° ë¸Œëœì¹˜ ì „ëµ ì„¤ì •
- [ ] GitHub Actions ê¸°ë³¸ ì›Œí¬í”Œë¡œìš° êµ¬ì„± (.github/workflows/ci-cd.yml)
- [ ] Dockerfile ì‘ì„± (ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ)
- [ ] Docker Compose ì„¤ì • (PostgreSQL, Redis, RabbitMQ)
- [ ] application.yml í™˜ê²½ ì„¤ì • (profiles: dev, docker, prod)
- [ ] Logback ë¡œê¹… ì‹œìŠ¤í…œ êµ¬ì¶•

**ìˆ˜ìš”ì¼-ëª©ìš”ì¼**
- [ ] JPA Entity ë° Repository êµ¬í˜„
- [ ] Spring Security + JWT ì¸ì¦ ì‹œìŠ¤í…œ
- [ ] ì‚¬ìš©ì CRUD REST API
- [ ] SpringDoc OpenAPI (Swagger) ì„¤ì •
- [ ] CI/CD íŒŒì´í”„ë¼ì¸ ì²« ì‹¤í–‰ ë° ê²€ì¦

**ê¸ˆìš”ì¼**
- [ ] JUnit 5 + Mockito í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶•
- [ ] GitHub Actions ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì„¤ì •
- [ ] ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ë„êµ¬ í†µí•© (CheckStyle, SpotBugs)

### ì£¼ì°¨ 2-3: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ + CI/CD ê°•í™”
**Week 2**
- [ ] RestTemplate/WebClientë¡œ Gemini/GPT API í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„
- [ ] í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì‹œìŠ¤í…œ (Thymeleaf í…œí”Œë¦¿ í™œìš©)
- [ ] ì±„íŒ… ìŠ¤ë ˆë“œ ê´€ë¦¬ REST API
- [ ] **ëŒ€í™” ë¶„ì„ ì—”ì§„ êµ¬ì¶•**: ì„ í˜¸ë„/ê´€ì‹¬ì‚¬/ì˜ˆì‚°íŒ¨í„´ ì‹¤ì‹œê°„ ì¶”ì¶œ ë¡œì§
- [ ] **ì„ í˜¸ë„ í•™ìŠµ íŒŒì´í”„ë¼ì¸**: ë¶„ì„ ê²°ê³¼ â†’ user_preferences ìë™ ì—…ë°ì´íŠ¸
- [ ] @Asyncë¥¼ í™œìš©í•œ AI ë©”ì‹œì§€ ë¹„ë™ê¸° ì²˜ë¦¬
- [ ] Spring Cache + Redis ì‘ë‹µ ìºì‹± ì „ëµ
- [ ] SonarQube ì½”ë“œ í’ˆì§ˆ ë¶„ì„ í†µí•©
- [ ] ìë™í™”ëœ ë³´ì•ˆ ìŠ¤ìº” (Snyk, OWASP) ì„¤ì •

**Week 3**
- [ ] ì—¬í–‰ ê³„íš ìƒì„± ì„œë¹„ìŠ¤ ë¡œì§
- [ ] **AI ì±„íŒ… â†’ ì—¬í–‰ê³„íš ìƒì„± ì—°ë™**: ëŒ€í™” ë¶„ì„ ê²°ê³¼ ê¸°ë°˜ ìë™ ì—¬í–‰ê³„íš ìƒì„±
- [ ] ì‚¬ì§„ ë¶„ì„ íŒŒì´í”„ë¼ì¸ (Apache Tika EXIF, Vision API)
- [ ] PostGIS + JPA Spatial ì¥ì†Œ ê²€ìƒ‰/ì €ì¥
- [ ] ì™¸ë¶€ API í†µí•© (Kakao Maps, ê¸°ìƒì²­ API)
- [ ] **ì—¬í–‰ í›„ê¸° ì‹œìŠ¤í…œ ê¸°ë°˜ êµ¬ì¶•**: í›„ê¸° CRUD, í‰ì  ì‹œìŠ¤í…œ, ëª¨ë”ë ˆì´ì…˜
- [ ] **í›„ê¸°-ì—¬í–‰ ë°ì´í„° ì—°ë™**: ì—¬í–‰ ì™„ë£Œ ìƒíƒœ API, í›„ê¸° ì‘ì„± ê¶Œí•œ ê²€ì¦
- [ ] Resilience4j Circuit Breaker êµ¬í˜„
- [ ] ìŠ¤í…Œì´ì§• í™˜ê²½ ìë™ ë°°í¬ íŒŒì´í”„ë¼ì¸ êµ¬ì¶•

### ì£¼ì°¨ 4: ê³ ê¸‰ ê¸°ëŠ¥ + Docker í†µí•©
**ì›”ìš”ì¼-ìˆ˜ìš”ì¼**
- [ ] Spring Scheduler (@Scheduled) ì¼ì • ê°ì‹œ
- [ ] JavaMailSender + WebPush ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] Spring WebSocket + STOMP ì‹¤ì‹œê°„ ì±„íŒ…
- [ ] Docker ì´ë¯¸ì§€ ìë™ ë¹Œë“œ ë° ë ˆì§€ìŠ¤íŠ¸ë¦¬ í‘¸ì‹œ

**ëª©ìš”ì¼-ê¸ˆìš”ì¼**
- [ ] UUID ê¸°ë°˜ ê³µìœ  í† í° ì‹œìŠ¤í…œ
- [ ] í¬ë ˆë”§/ê²°ì œ ì‹œìŠ¤í…œ (Mock KakaoPay Webhook)
- [ ] **ì¶”ì²œ ì‹œìŠ¤í…œ ê¸°ë°˜ ì¤€ë¹„**: ML ë¼ì´ë¸ŒëŸ¬ë¦¬ í†µí•©, í•™ìŠµ ë°ì´í„° ìˆ˜ì§‘ ë¡œì§
- [ ] **ì¶”ì²œ ì—”ì§„ í”„ë¡œí† íƒ€ì…**: ì‚¬ìš©ì ì„ í˜¸ë„ ë¶„ì„, ê¸°ë³¸ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜
- [ ] Spring Security ê¶Œí•œ ê¸°ë°˜ ê´€ë¦¬ì API
- [ ] ì»¨í…Œì´ë„ˆ ë³´ì•ˆ ìŠ¤ìº” ë° ì·¨ì•½ì  ê²€ì‚¬

### ì£¼ì°¨ 5-6: ìµœì í™” ë° AWS ë°°í¬ + CI/CD ì™„ì„±
**Week 5**
- [ ] AWS ê³„ì • ë° VPC ì„¤ì •
- [ ] RDS PostgreSQL ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ì„¤ì •
- [ ] ElastiCache Redis í´ëŸ¬ìŠ¤í„° êµ¬ì„±
- [ ] S3 ë²„í‚· ìƒì„± ë° ì •ì±… ì„¤ì •
- [ ] **ê°œì¸í™” ì¶”ì²œ ì‹œìŠ¤í…œ ì™„ì„±**: ì±„íŒ… ì„ í˜¸ë„ + í›„ê¸° ë°ì´í„° ê¸°ë°˜ ì¶”ì²œ ëª¨ë¸ í•™ìŠµ
- [ ] **ì‹¤ì‹œê°„ ë°ì´í„° íŒŒì´í”„ë¼ì¸**: ì±„íŒ…ë¶„ì„â†’ì„ í˜¸ë„â†’ì¶”ì²œ í•™ìŠµ ë°ì´í„° ë™ê¸°í™”
- [ ] EC2 ì¸ìŠ¤í„´ìŠ¤ í…œí”Œë¦¿ ì‘ì„±
- [ ] Application Load Balancer êµ¬ì„±
- [ ] í”„ë¡œë•ì…˜ ë°°í¬ íŒŒì´í”„ë¼ì¸ êµ¬ì¶• (Blue-Green ë°°í¬)

**Week 6**
- [ ] Auto Scaling Group ì„¤ì •
- [ ] CloudWatch ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ êµ¬ì„±
- [ ] GitHub Actionsê³¼ AWS CodeDeploy í†µí•©
- [ ] **ì¶”ì²œ ì‹œìŠ¤í…œ ì„±ëŠ¥ ìµœì í™”**: ì¶”ì²œ ì •í™•ë„ ê²€ì¦, A/B í…ŒìŠ¤íŠ¸ ì¤€ë¹„
- [ ] **í›„ê¸°â†”ì¶”ì²œ íŒŒì´í”„ë¼ì¸ ì™„ì„±**: í”¼ë“œë°± ë£¨í”„, ì‹¤ì‹œê°„ í•™ìŠµ ëª¨ë¸ ì—…ë°ì´íŠ¸
- [ ] Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ AWS í”„ë¡œíŒŒì¼ ì„¤ì •
- [ ] ë³´ì•ˆ ê·¸ë£¹ ë° IAM ì—­í•  ìµœì í™”
- [ ] ìë™ ë¡¤ë°± ì‹œìŠ¤í…œ êµ¬ì¶• ë° í…ŒìŠ¤íŠ¸
- [ ] CI/CD ìš´ì˜ ë§¤ë‰´ì–¼ ë° ëª¨ë‹ˆí„°ë§ ì•ŒëŒ ì„¤ì •
- [ ] **ì¶”ì²œ ì‹œìŠ¤í…œ ìš´ì˜ ê°€ì´ë“œ ë° ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ** ì‘ì„±
- [ ] í”„ë¡œë•ì…˜ ë°°í¬ ë° ìš´ì˜ ë¬¸ì„œ ì‘ì„±

-------------------------------------------------------------------------------
## âš ï¸ Phase 6: ìœ„í—˜ ê´€ë¦¬

### 6.1 ê¸°ìˆ ì  ìœ„í—˜
| ìœ„í—˜ | ì˜í–¥ë„ | ì™„í™” ì „ëµ |
|------|--------|-----------|
| AI API ë¹„ìš© í­ì¦ | ë†’ìŒ | - í† í° ì œí•œ (256-512)<br>- ìºì‹± ì „ëµ<br>- ìŠ¹ê²© ì œí•œ (1íšŒ) |
| ì™¸ë¶€ API ì¥ì•  | ì¤‘ê°„ | - Circuit Breaker<br>- Fallback ì „ëµ<br>- ë‹¤ì¤‘ ì œê³µì |
| DB ì„±ëŠ¥ ì €í•˜ | ë†’ìŒ | - ì¸ë±ì‹± ìµœì í™”<br>- ì½ê¸° ì „ìš© ë³µì œë³¸<br>- ìºì‹± ë ˆì´ì–´ |

### 6.2 ë¹„ì¦ˆë‹ˆìŠ¤ ìœ„í—˜
| ìœ„í—˜ | ì˜í–¥ë„ | ì™„í™” ì „ëµ |
|------|--------|-----------|
| í¬ë ˆë”§ ì•…ìš© | ë†’ìŒ | - Rate Limiting<br>- ì´ìƒ íƒì§€<br>- ê°ì‚¬ ë¡œê·¸ |
| ê°œì¸ì •ë³´ ìœ ì¶œ | ë§¤ìš° ë†’ìŒ | - ì•”í˜¸í™” (at rest/in transit)<br>- ìµœì†Œ ìˆ˜ì§‘ ì›ì¹™<br>- GDPR ì¤€ìˆ˜ |

-------------------------------------------------------------------------------
## ğŸ§ª Phase 7: í…ŒìŠ¤íŠ¸ ì „ëµ

### 7.1 í…ŒìŠ¤íŠ¸ ë ˆë²¨
- **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**: JUnit 5 + Mockito (80% ì»¤ë²„ë¦¬ì§€ ëª©í‘œ)
- **í†µí•© í…ŒìŠ¤íŠ¸**: @SpringBootTest + MockMvc (API ì—”ë“œí¬ì¸íŠ¸)
- **E2E í…ŒìŠ¤íŠ¸**: RestAssured (í•µì‹¬ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤)
- **ë¶€í•˜ í…ŒìŠ¤íŠ¸**: JMeter ë˜ëŠ” Gatling (ë™ì‹œ ì‚¬ìš©ì 1000ëª… ëª©í‘œ)

### 7.2 í…ŒìŠ¤íŠ¸ ìë™í™”
```yaml
# GitHub Actions CI/CD Pipeline (.github/workflows/ci-cd.yml)
name: Travel Agent CI/CD

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-java@v3
      with:
        java-version: '17'
        distribution: 'temurin'
        cache: gradle
    
    - name: Run Tests
      run: |
        ./gradlew clean
        ./gradlew checkstyleMain
        ./gradlew test
        ./gradlew integrationTest
    
    - name: SonarQube Analysis
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
      run: ./gradlew sonarqube
    
    - name: Security Scan
      run: |
        ./gradlew dependencyCheckAnalyze
        docker run --rm -v "$PWD:/app" snyk/snyk:linux test

  build-and-deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-java@v3
      with:
        java-version: '17'
        distribution: 'temurin'
    
    - name: Build Application
      run: ./gradlew build -x test
    
    - name: Build Docker Image
      run: |
        docker build -t travel-agent-api:${{ github.sha }} .
        docker tag travel-agent-api:${{ github.sha }} travel-agent-api:latest
    
    - name: Security Scan Docker Image
      run: |
        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \
          -v $HOME/Library/Caches:/root/.cache/ aquasec/trivy:latest \
          image travel-agent-api:latest
    
    - name: Push to ECR
      env:
        AWS_REGION: ap-northeast-2
        AWS_ACCOUNT_ID: ${{ secrets.AWS_ACCOUNT_ID }}
      run: |
        aws ecr get-login-password --region $AWS_REGION | \
          docker login --username AWS --password-stdin \
          $AWS_ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com
        
        docker tag travel-agent-api:latest \
          $AWS_ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com/travel-agent:${{ github.sha }}
        
        docker push $AWS_ACCOUNT_ID.dkr.ecr.$AWS_REGION.amazonaws.com/travel-agent:${{ github.sha }}
    
    - name: Deploy to ECS
      run: |
        aws ecs update-service \
          --cluster travel-production \
          --service travel-api \
          --force-new-deployment
```

-------------------------------------------------------------------------------
## ğŸš€ Phase 8: CI/CD íŒŒì´í”„ë¼ì¸ ë° ë°°í¬ ì „ëµ

### 8.1 í™˜ê²½ êµ¬ì„±
- **ê°œë°œ**: Docker Compose ë¡œì»¬ í™˜ê²½
  - ëª¨ë“  ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆí™”
  - í•« ë¦¬ë¡œë“œ ì§€ì› (Spring DevTools, React Hot Module Replacement)
  
- **ìŠ¤í…Œì´ì§•**: AWS EC2 + RDS (ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤)
  - t3.medium EC2 ì¸ìŠ¤í„´ìŠ¤
  - RDS PostgreSQL (db.t3.small)
  - ElastiCache Redis (cache.t3.micro)
  
- **í”„ë¡œë•ì…˜**: AWS EC2 Auto Scaling + RDS Multi-AZ
  - EC2 Auto Scaling Group (t3.large Ã— 2-4)
  - Application Load Balancer
  - RDS PostgreSQL Multi-AZ (db.m5.large)
  - ElastiCache Redis Cluster
  - CloudWatch ëª¨ë‹ˆí„°ë§
  - Blue-Green ë°°í¬ (AWS CodeDeploy)

### 8.2 CI/CD íŒŒì´í”„ë¼ì¸ ìƒì„¸ êµ¬ì„±

**ë¸Œëœì¹˜ ì „ëµê³¼ CI/CD ì—°ë™**
```
main branch    â†’ Production ë°°í¬ (ìˆ˜ë™ ìŠ¹ì¸)
develop branch â†’ Staging ìë™ ë°°í¬
feature/*      â†’ PR ì‹œ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
hotfix/*       â†’ Production ê¸´ê¸‰ ë°°í¬
```

**íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ë³„ êµ¬ì„±**
1. **ì½”ë“œ ê²€ì¦ ë‹¨ê³„**
   - CheckStyle, SpotBugs ì •ì  ë¶„ì„
   - SonarQube í’ˆì§ˆ ê²Œì´íŠ¸
   - ë³´ì•ˆ ì·¨ì•½ì  ìŠ¤ìº” (Snyk, OWASP)

2. **í…ŒìŠ¤íŠ¸ ë‹¨ê³„**
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (JUnit 5)
   - í†µí•© í…ŒìŠ¤íŠ¸ (TestContainers)
   - API í…ŒìŠ¤íŠ¸ (RestAssured)

3. **ë¹Œë“œ ë° íŒ¨í‚¤ì§•**
   - Gradle ë¹Œë“œ ìµœì í™”
   - Docker ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ
   - ì»¨í…Œì´ë„ˆ ë³´ì•ˆ ìŠ¤ìº” (Trivy)

4. **ë°°í¬ ë‹¨ê³„**
   - ECR ì´ë¯¸ì§€ í‘¸ì‹œ
   - ECS ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸
   - í—¬ìŠ¤ì²´í¬ ê²€ì¦
   - ë¡¤ë°± ìë™í™”

**ë°°í¬ ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°**
- Staging: ìë™ ë°°í¬ (develop ë¸Œëœì¹˜)
- Production: ìˆ˜ë™ ìŠ¹ì¸ + Blue-Green ë°°í¬
- ë¡¤ë°±: ì´ì „ ë²„ì „ìœ¼ë¡œ ì¦‰ì‹œ ë³µì›

### 8.3 ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼
- **APM**: Spring Boot Actuator + Micrometer
- **ë¡œê·¸**: Logback + ELK Stack (Elasticsearch, Logstash, Kibana)
- **ë©”íŠ¸ë¦­**: Prometheus + Grafana
- **ì•Œë¦¼**: Spring Boot Admin + Slack/Email
- **í—¬ìŠ¤ì²´í¬**: /actuator/health ì—”ë“œí¬ì¸íŠ¸
- **CI/CD ëª¨ë‹ˆí„°ë§**: GitHub Actions ì‹¤í–‰ ìƒíƒœ, ë°°í¬ ì„±ê³µ/ì‹¤íŒ¨ ì•Œë¦¼

-------------------------------------------------------------------------------
## â˜ï¸ AWS ì¸í”„ë¼ êµ¬ì„±

### EC2 ì„¤ì •
```yaml
# EC2 Launch Template
ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…: t3.large
AMI: Amazon Linux 2023
ë³´ì•ˆ ê·¸ë£¹:
  - SSH (22): ê´€ë¦¬ì IPë§Œ
  - HTTP (80): ALBì—ì„œë§Œ
  - HTTPS (443): ALBì—ì„œë§Œ
  - App Port (8080): ALBì—ì„œë§Œ
IAM Role:
  - S3 ì½ê¸°/ì“°ê¸°
  - RDS ì ‘ê·¼
  - CloudWatch ë¡œê·¸
  - Secrets Manager ì½ê¸°
```

### RDS ì„¤ì •
```yaml
ì—”ì§„: PostgreSQL 14 + PostGIS
ì¸ìŠ¤í„´ìŠ¤: db.m5.large
ìŠ¤í† ë¦¬ì§€: 100GB SSD (gp3)
Multi-AZ: í™œì„±í™”
ë°±ì—…: ìë™ ë°±ì—… 7ì¼ ë³´ê´€
ì•”í˜¸í™”: KMS ì•”í˜¸í™” í™œì„±í™”
íŒŒë¼ë¯¸í„° ê·¸ë£¹:
  - max_connections: 200
  - shared_buffers: 256MB
  - effective_cache_size: 1GB
```

### ElastiCache ì„¤ì •
```yaml
ì—”ì§„: Redis 7
ë…¸ë“œ íƒ€ì…: cache.t3.medium
í´ëŸ¬ìŠ¤í„° ëª¨ë“œ: í™œì„±í™”
ë³µì œë³¸: 2ê°œ (ë‹¤ì¤‘ AZ)
ìë™ í˜ì¼ì˜¤ë²„: í™œì„±í™”
ë°±ì—…: ì¼ì¼ ìŠ¤ëƒ…ìƒ·
```

### Application Load Balancer
```yaml
ë¦¬ìŠ¤ë„ˆ:
  - HTTP (80) â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
  - HTTPS (443) â†’ Target Group
í—¬ìŠ¤ì²´í¬:
  - ê²½ë¡œ: /actuator/health
  - ê°„ê²©: 30ì´ˆ
  - ì„ê³„ê°’: 2íšŒ ì‹¤íŒ¨
ìŠ¤í‹°í‚¤ ì„¸ì…˜: í™œì„±í™” (WebSocketìš©)
```

### Auto Scaling ì •ì±…
```yaml
ìµœì†Œ ì¸ìŠ¤í„´ìŠ¤: 2
ìµœëŒ€ ì¸ìŠ¤í„´ìŠ¤: 6
ëŒ€ìƒ ì¶”ì :
  - CPU ì‚¬ìš©ë¥  > 70%
  - ìš”ì²­ ìˆ˜ > 1000/ë¶„
ìŠ¤ì¼€ì¼ ì•„ì›ƒ: 1ë¶„ ëŒ€ê¸°
ìŠ¤ì¼€ì¼ ì¸: 5ë¶„ ëŒ€ê¸°
```

-------------------------------------------------------------------------------
## ï¿½ï¿½ Docker êµ¬ì„± ìƒì„¸

### Dockerfile (Spring Boot)
```dockerfile
# ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ
FROM gradle:7.6-jdk17 AS build
WORKDIR /app
COPY build.gradle settings.gradle ./
COPY src ./src
RUN gradle build -x test

FROM openjdk:17-slim
WORKDIR /app
COPY --from=build /app/build/libs/*.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

### Dockerfile (React)
```dockerfile
FROM node:18-alpine AS build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
EXPOSE 80
```

### Docker ë„¤íŠ¸ì›Œí¬ êµ¬ì„±
- **travel-network**: ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ì—°ê²°ë˜ëŠ” ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬
- **ë‚´ë¶€ í†µì‹ **: ì„œë¹„ìŠ¤ëª…ìœ¼ë¡œ í†µì‹  (backend:8080, postgres:5432)
- **ë³¼ë¥¨ ë§ˆìš´íŠ¸**: ë°ì´í„° ì˜ì†ì„± ë³´ì¥

-------------------------------------------------------------------------------
## ğŸ“Š ì„±ê³µ ì§€í‘œ

### ê¸°ìˆ  ì§€í‘œ
- API ì‘ë‹µì‹œê°„ < 200ms (p95)
- ê°€ìš©ì„± > 99.9%
- AI API ë¹„ìš© < ì˜ˆì‚°ì˜ 80%

### ë¹„ì¦ˆë‹ˆìŠ¤ ì§€í‘œ
- ì¼ì¼ í™œì„± ì‚¬ìš©ì > 1000ëª…
- í‰ê·  ì„¸ì…˜ ì‹œê°„ > 10ë¶„
- í¬ë ˆë”§ ì „í™˜ìœ¨ > 5%

---
ì´ ì›Œí¬í”Œë¡œìš°ë¥¼ ë”°ë¼ ë°±ì—”ë“œë¥¼ ìš°ì„  êµ¬í˜„í•˜ê³ , ì´í›„ í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ ì‹œ ì•ˆì •ì ì¸ API ê¸°ë°˜ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
